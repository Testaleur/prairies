(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();function v(d,r,l,c){const e="/prairies/";Promise.all([d3.json(`${e}regions.geojson`),d3.csv(`${e}data.csv`)]).then(([t,n])=>{const i=new Map(n.map(o=>[o.nom.trim(),+o.value]));console.log("CSV keys:",Array.from(i.keys()));const f=d3.max(n,o=>+o.value),m=d3.scaleSequential().domain([0,f]).interpolator(d3.interpolateBlues),g=d3.geoConicConformal().center([2.2137,46.2276]).scale(2500).translate([l/2,c/2]),h=d3.geoPath().projection(g);t.features.forEach(o=>{const a=o.properties.nom.trim(),s=i.has(a)?"Found":"Not found";console.log(a,s)}),d.selectAll("path").data(t.features).join("path").attr("d",h).attr("fill",o=>{const a=o.properties.nom.trim(),s=i.get(a);return s?m(s):"#ddd"}).attr("stroke","#fff").attr("stroke-width",.5).on("mouseover",(o,a)=>{const s=a.properties.nom.trim(),y=i.get(s)||"No data";d3.select(o.currentTarget).attr("stroke-width",2),r.style("opacity",1).html(`<strong>${s}</strong><br/>Value: ${y}`)}).on("mousemove",o=>{r.style("left",o.pageX+10+"px").style("top",o.pageY+10+"px")}).on("mouseout",o=>{d3.select(o.currentTarget).attr("stroke-width",.5),r.style("opacity",0)})}).catch(t=>console.error("Error loading map/data:",t))}const u=1200,p=800,w=d3.select("#map").append("svg").attr("width",u).attr("height",p),L=d3.select("#tooltip");v(w,L,u,p);
